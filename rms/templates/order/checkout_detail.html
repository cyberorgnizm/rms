{% extends 'cart/base.html' %} {% load cart_tag %} {% block main %}
<div class="container">
  <div class="text-center mt-15 mb-10">
    <h3
      class="display-6"
      style="text-decoration: underline; text-decoration-color: blueviolet"
    >
      Checkout
    </h3>
  </div>
  <p>You currently have <strong>{{request.session.cart.items|length}}</strong> items in your cart</p>
  {% if request.session.cart.items %}
  <table class="table text-nowrap mb-0 mt-5">
    <thead class="table-light">
      <tr>
        <th>S/No</th>
        <th>Photo</th>
        <th>Menu</th>
        <th>Quantity</th>
        <th>Price</th>
        <th>Total</th>
      </tr>
    </thead>
    <tbody>
      {% for key,value in request.session.cart.items %}
      <tr>
        <td class="align-middle">{{key}}</td>
        <td class="align-middle">
          <div class="d-flex align-items-center">
            <div>
              <div class="icon-shape icon-md border p-4 rounded-1">
                <img
                  class="avatar avatar-lg rounded-circle"
                  src="{{value.image}}"
                  alt="{{value.name}}"
                />
              </div>
            </div>
          </div>
        </td>
        <td class="align-middle">
          {{value.name}}
        </td>
        <td class="align-middle">{{value.quantity}}</td>
        <td class="align-middle">{{value.price}}</td>
        <td class="align-middle text-dark">
          {{value.price|multiply:value.quantity}}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  <div class="row mb-10">
    <div class="col-6 offset-5">
      <div class="mt-5 d-flex justify-content-between align-items-center h-100">
          <div><strong>Total</strong>: {{total_cost}}</div>
          <div>
            <form method="post">
              {% csrf_token %}
              <button type="submit" class="btn btn-md btn-outline-primary mr-5"><small>Place Order</small></button>
              <a href="{% url 'orders:checkout' %}" class="btn btn-md btn-outline-primary"><small>Make Payment</small></a>
            </form>
          </div>
      </div>
    </div>
  </div>
  {% else %}
  <div class="text-center mt-10">
    <i class="icon-xxl" data-feather="shopping-cart"></i>
    <p class="mt-5">You have 0 items in your cart, please add items before you checkout</p>
  </div>
  {% endif %}
</div>
{% endblock %}
